class MFRBlogGrid{constructor(e,t){this.$index=e,this.$element=$(t),this.selectors={grid:".blog-grid__grid",entry:".blog-grid__entry",blogFilters:".blog-filter",blogFilter:".blog-filter__button",selector:".blog-filter__selector",containedFilters:".blog-grid__sub-filters"},this.scroll={},this.init()}init(){this.$grid=this.$element.find(this.selectors.grid),this.$entry=this.$element.find(this.selectors.entry),this.$blogFilters=this.$element.find(this.selectors.blogFilters),this.$blogFilter=this.$element.find(this.selectors.blogFilters),this.$selector=this.$element.find(this.selectors.selector),this.$containedFilters=this.$element.find(this.selectors.containedFilters),this.initializeGrid(),this.initFilters(),this.initFilterScrollEvents(),this.updateFilters(),this.$blogFilter.on("click",this.__handleFilterChange.bind(this)),$(window).on("resize",this.updateSelector.bind(this)),$(window).on("resize",this.initializeGrid.bind(this))}initializeGrid(){this.$grid.isotope({itemSelector:this.selectors.entry,percentPosition:!0,percentPosition:!1,masonry:{isFitWidth:!0,columnWidth:this.$entry.outerWidth(),gutter:0}}),this.$grid.one("arrangeComplete",((e,t)=>{if(!t[0])return;const i=t[0].layout.modes.masonry.columnWidth,s=t[0].layout.modes.masonry.cols;this.$grid.css({maxWidth:s*i,width:"100%"})}))}__handleFilterChange(e){if(this.$containedFilters.hasClass("is-scrolling"))return;const t=$(e.target),i=t.closest(this.selectors.blogFilters);t.siblings().removeClass("is-active"),t.addClass("is-active"),i.data("filter",t.data("filter")),this.updateFilters()}updateFilters(){let e=[];this.$blogFilters.each(((t,i)=>{e[t]=$(i).data("filter")})),this.$grid.isotope({filter:e.toString().replace(",","")}),this.updateSelector()}initFilterScrollEvents(){if(!this.$containedFilters.get(0))return;const e=this.$containedFilters.get(0);e.addEventListener("wheel",(t=>{0!=t.deltaY&&(t.preventDefault(),t.currentTarget.scrollTo({left:e.scrollLeft+2*t.deltaY,behavior:"smooth"}))}))}__handleScrollStart(e){const t=this.$containedFilters.get(0),i=e.changedTouches?e.changedTouches[0].pageX:e.pageX;this.scroll.isDown=!0,this.scroll.startX=i-t.offsetLeft,this.scroll.scrollLeft=t.scrollLeft}__handleScrollEnd(e){const t=this.$containedFilters.get(0);this.scroll.isDown=!1,setTimeout((()=>t.classList.remove("is-scrolling")),100)}__handleScrollMove(e){if(!this.scroll.isDown)return;e.preventDefault();const t=this.$containedFilters.get(0),i=3*((e.changedTouches?e.changedTouches[0].pageX:e.pageX)-t.offsetLeft-this.scroll.startX);t.scrollLeft=this.scroll.scrollLeft-i,t.classList.add("is-scrolling")}initFilters(){this.$blogFilters.each(((e,t)=>{$(t).data("filter",$(t).find(this.selectors.blogFilter+".is-active").data("filter"))})),this.updateSelector()}updateSelector(){this.$selector.each(((e,t)=>{const i=$(t).closest(this.selectors.blogFilters).find(this.selectors.blogFilter+".is-active");this.$selector.css({left:i.get(0).offsetLeft,width:i.outerWidth(),height:i.outerHeight()})}))}}function Carousel(e,t,i){this.$element=$(t),this.index=e,this.selectors={wrapper:".carousel",slider:".carousel__slides",items:".carousel__item",image:".carousel__item img"},this.states={wrapper:{IS_INITIALIZED:"carousel--is-initialized"}},this.options=Object.assign({},{cellSelector:this.selectors.items,selectedAttraction:.2,friction:.8,groupCells:!0,wrapAround:!1,prevNextButtons:!0,contain:!0,cellAlign:"center",pageDots:!1,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}},i),this.viewportOffset=0,this.initialize()}Carousel.prototype=Object.assign({},Carousel.prototype,{initialize:function(){this.$wrapper=this.$element.find(this.selectors.wrapper),this.$slider=this.$element.find(this.selectors.slider),this.$items=this.$element.find(this.selectors.items),this.$image=this.$element.find(this.selectors.image),this.carouselInMobile=this.$wrapper.data("carousel-on-mobile"),!this.$wrapper.length&&this.$element.hasClass(this.selectors.wrapper.replace(".",""))&&(this.$wrapper=this.$element),$(window).on("resize orientationchange",debounce(this.determineSliderState.bind(this),200)).on("orientationchange resize",this._handleResize.bind(this)),this.$image.on("load",(()=>$(window).trigger("resize"))),this.determineSliderState()},isInitialized:function(){return this.$wrapper.hasClass(this.states.wrapper.IS_INITIALIZED)},initializeSlider:function(){let e=this.options;!this.carouselInMobile&&$(window).width()<1024?this.destroySlider():this.isInitialized()||($(window).width()<640&&(e=Object.assign({},e,{cellAlign:"center",freeScroll:!1,contain:!1})),this.$slider.flickity(e),this.$wrapper.addClass(this.states.wrapper.IS_INITIALIZED))},destroySlider:function(){this.isInitialized()&&(this.$slider.flickity("destroy"),this.$wrapper.removeClass(this.states.wrapper.IS_INITIALIZED))},hasReachedViewportEdge:function(){let e=0;return this.$items.each((function(){e+=$(this).outerWidth(!0)})),e-this.viewportOffset>=$(window).width()},determineSliderState:function(){this.hasReachedViewportEdge()?this.initializeSlider():this.destroySlider()},refresh:function(){this.isInitialized()&&(this.$slider.flickity("reloadCells"),this.$slider.flickity("select",0))},_handleResize:function(e){this.isInitialized()&&(this.$items.css("min-height","initial"),this.$slider.flickity("resize"),this.$items.css("min-height",""))}});class MFRFadingTexts{constructor(e,t){this.$index=e,this.$element=$(t),this.selectors={entry:".fading-text__entry",stickyWrapper:".fading-text__image",stickyElement:".fading-text__image-inner",image:".fading-text__image img"},this.init()}init(){this.$entry=this.$element.find(this.selectors.entry),this.$stickyWrapper=this.$element.find(this.selectors.stickyWrapper),this.$stickyElement=this.$element.find(this.selectors.stickyElement),this.$image=this.$element.find(this.selectors.image),this.initSticky()}initSticky(){const e=this.$stickyWrapper.outerHeight()-this.$stickyElement.outerHeight();ScrollTrigger.create({trigger:this.$stickyElement,start:`top top+=${$("header.header .header__wrapper").height()}`,end:`+=${e}`,pin:!0,pinSpacing:!1})}initGsap(){gsap&&gsap.to&&(gsap.set(this.$entry,{opacity:0}),this.$entry.each(((e,t)=>{ScrollTrigger.create({trigger:$(t),start:"top 50%",end:"bottom 50%",onEnter:()=>{gsap.to($(t),{opacity:1}),$(t).addClass("is-active"),this.animateFading()},onEnterBack:()=>{gsap.to($(t),{opacity:1}),$(t).addClass("is-active"),this.animateFading()},onLeave:()=>{$(t).removeClass("is-active"),this.animateFading()},onLeaveBack:()=>{$(t).removeClass("is-active"),this.animateFading()}})})))}animateFading(){const e=[1,.3,.1,0];for(let t=1;t<=3;t++){const i=this.$element.find(`${this.selectors.entry}.is-active`).data("index"),s=this.$element.find(`${this.selectors.entry}[data-index="${i-t}"]`),r=this.$element.find(`${this.selectors.entry}[data-index="${i+t}"]`);gsap.to(s,{opacity:e[t]??0}),gsap.to(r,{opacity:e[t]??0})}}updateImages(e){console.log("UPDATE IMAGES",e);const t=this.$element.find(`${this.selectors.image}[data-index="${e}"]`);console.log("IMAGE",t),t.length&&(this.$image.removeClass("is-active"),t.addClass("is-active"))}}class MFRGalleryGrid{constructor(e,t){this.$index=e,this.$element=$(t),this.selectors={gallery:".portfolio__gallery",filter:".filter-item",item:".grid-item",sizer:".grid-item"},this.init()}init(){this.$gallery=this.$element.find(this.selectors.gallery),this.$filter=this.$element.find(this.selectors.filter),this.__handleIsotopeGrid(),this.$filter.on("click",this.__handleIsotopeFilter.bind(this))}__handleIsotopeGrid(){this.$gallery.isotope({itemSelector:this.selectors.item,percentPosition:!0,masonry:{columnWidth:this.selectors.sizer}})}__handleIsotopeFilter(e){const t=$(e.currentTarget);this.$gallery.isotope({filter:t.data("filter")}),t.parent().siblings().children().removeClass("is-active"),t.addClass("is-active");let i=this.$gallery.data("isotope").filteredItems.length;$(".no-results").remove(),0===i?$('<div class="no-results"><p>No matches found.</p></div>').insertAfter(this.$gallery):$(".no-results").remove()}}class MFRHostedVideo{constructor(e,t){this.$index=e,this.$element=$(t),this.init()}init(){this.$video=this.$element.find("video"),this.$cover=this.$element.find(".mfr-components__video-custom-poster"),this.$playPauseButton=this.$element.find(".mfr-components__video-icon"),this.$playPauseButtonV2=this.$element.find(".play-pause-button"),this.$speakerButton=this.$element.find(".speaker-button"),this.$video.on("play",this.__handleVideoPlay.bind(this)),this.$video.on("pause",this.__handleVideoPause.bind(this)),this.$cover.on("click",this.__handleVideoClick.bind(this)),this.$video.on("click",this.__handleVideoClick.bind(this)).on("volumechange",this.__handleVideoVolumeChange.bind(this)),this.$playPauseButtonV2.on("click",this.__handleControlClick.bind(this)),this.$speakerButton.on("click",this.__handleSpeakerButtonClick.bind(this))}__handleVideoPlay(e){this.$playPauseButtonV2.removeClass("play pause").addClass("pause"),this.$element.toggleClass("is-playing",!e.currentTarget.paused),this.$element.toggleClass("is-muted",e.currentTarget.muted)}__handleVideoPause(e){console.log(this.$video),this.$playPauseButtonV2.removeClass("play pause").addClass("play"),this.$element.toggleClass("is-playing",!e.currentTarget.paused),this.$element.toggleClass("is-muted",e.currentTarget.muted)}__handleVideoClick(e){if($(e.currentTarget).attr("controls"))return;let t=this.$video.get(0);t.paused?t.play():t.pause()}__handleControlClick(e){let t=this.$video.get(0);this.$playPauseButtonV2.hasClass("pause")?t.pause():t.play()}__handleVideoVolumeChange(e){this.$element.toggleClass("is-muted",e.currentTarget.muted)}__handleSpeakerButtonClick(e){this.$video.get(0).muted=!this.$video.get(0).muted}}class MFRLogoBar{constructor(e,t){this.$index=e,this.$element=$(t),this.selectors={marquee:".logo-bar__marquee",control:".logo-bar__control-button",helper:".logo-bar__marquee-helper",entry:".logo-bar__marquee-entry"},this.init()}init(){this.$marquee=this.$element.find(this.selectors.marquee),this.$control=this.$element.find(this.selectors.control),this.$helper=this.$element.find(this.selectors.helper),this.$entry=this.$element.find(this.selectors.entry),this.$control.on("click",this.__handleControlClick.bind(this)),window.onWidthResize(this.__handleWidthResize.bind(this)),this.__handleWidthResize()}__handleControlClick(e){this.$marquee.removeClass("play pause"),this.$control.hasClass("pause")&&this.$marquee.addClass("pause")}__handleWidthResize(e){const t=this.$helper.width();this.$entry.css("min-width",t)}}class MFRMarquee{constructor(e,t){this.$index=e,this.$element=$(t),this.selectors={item:".marquee-scroller__item"},this.init()}init(){this.$item=this.$element.find(".marquee-scroller__item");let e=0;this.$item.each(((t,i)=>{e+=$(i).outerWidth(!0)})),this.$element.width(e)}}class MFRTimedCarousel{constructor(e,t,i){this.$index=e,this.$element=$(t),this.selectors={items:"> *",bar:".flickity-page-dots .dot.is-selected",allBars:".flickity-page-dots .dot"},this.flickityOptions=i.flickityOptions,this.autoplayTiming=i.autoplayTiming,this.timingArgs={percentTime:0,isPaused:!1},this.init()}init(){this.$slider=this.$element,this.$item=this.$element.find(this.selectors.items),this.$currentSlide=this.$element.find(this.selectors.currentSlide),this.initCarousel(),$(window).on("resize",(()=>{this.$element.data("flickity")&&this.initCarousel()}))}initCarousel(){this.$item.length<=1||(this.$slider.flickity({...this.flickityOptions,on:{change:()=>{this.resetProgressbar(),this.updateSlideIndicators(),this.startProgressbar()}}}),this.updateSlideIndicators(),this.startProgressbar())}updateSlideIndicators(){const e=this.$slider.data("flickity").selectedIndex+1;this.$allBars=this.$element.find(this.selectors.allBars),this.$currentSlide.text(e)}startProgressbar(){this.resetProgressbar(),this.timingArgs.percentTime=0,this.timingArgs.isPaused=!1,this.timingArgs.lastTimestamp=performance.now(),this.timingArgs.tick=requestAnimationFrame(this.interval.bind(this))}interval(e){this.timingArgs.isPaused||(this.timingArgs.percentTime+=(e-this.timingArgs.lastTimestamp)/(1e3*this.autoplayTiming),this.timingArgs.lastTimestamp=e,this.timingArgs.percentTime>=1?(this.$slider.flickity("next",!0),this.startProgressbar()):(this.$element.find(this.selectors.bar).css({"--dynamic-width":(100*this.timingArgs.percentTime).toFixed(2)+"%"}),this.timingArgs.tick=requestAnimationFrame(this.interval.bind(this))))}resetProgressbar(){this.$allBars.css({"--dynamic-width":"0%"}),cancelAnimationFrame(this.timingArgs.tick)}}function resizeObserverFunctions(){}function resizeObserver(){new ResizeObserver((()=>resizeObserverFunctions())).observe($(".smooth-content").get(0))}$(document).on("mfr:styles-rendered",resizeObserver).on("shopify:section:load",resizeObserver);
//# sourceMappingURL=mfr-components.js.map
